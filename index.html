<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Tabela de Classificação</title>

<style>
body {
    background: #111;
    color: #0f0;
    font-family: "Courier New", monospace;
    padding: 20px;
}

h1 {
    text-align: center;
}

h2 {
    text-align: center;
}

p {
    text-align: center;
}
table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
}

th, td {
    border: 1px solid #0f0;
    padding: 8px;
    text-align: center;
}

input, button {
    background: black;
    color: #0f0;
    border: 1px solid #0f0;
    padding: 5px;
    font-family: inherit;
}

button {
    cursor: pointer;
}

button:hover {
    background: #0f0;
    color: black;
}
    img {
    display: block; /* Transforma a imagem em um elemento de bloco */
    margin-left: auto; /* Centraliza a imagem */
    margin-right: auto; /* Centraliza a imagem */
    max-width: 100%;
    height: auto;
}
</style>

<!-- BIBLIOTECA DO SUPABASE -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>

<body>
<img src="foto.jpg"> <br></br>
<img src="im.jpg">
    
<h2>Jogo da Rodada: Gradius Generations (JP) [GBA}</h2>
<p>Regras: Configurações padrão. Autofire já ativado</p>
<p>pontuações válidas até dia 25/01</p>
<br></br>
<br></br>

<h1>RANKING</h1>

<div>
    Nome do Piloto:
    <input id="nome">
    Pontuação:
    <input id="pontuacao" type="number">
    <button onclick="adicionar()">Adicionar</button>
</div>

<table>
    <thead>
        <tr>
            <th>Piloto</th>
            <th>Pontuação</th>
            <th>Excluir</th>
        </tr>
    </thead>
    <tbody id="tabela"></tbody>
</table>

<script>
/* CONFIGURAÇÃO DO SUPABASE */
const SUPABASE_URL = "https://uxshocjdkvhplhodsgyw.supabase.co";
const SUPABASE_KEY = "sb_publishable_E7p2KBgBGeKPMyu5NAsY4g_q-Wa1BO3";

const supabaseClient = window.supabase.createClient(
    SUPABASE_URL,
    SUPABASE_KEY
);

/* CARREGAR DADOS */
async function carregar() {
    const { data, error } = await supabaseClient
        .from("ranking")
        .select("*")
        .order("pontuacao", { ascending: false });

    if (error) {
        console.error(error);
        return;
    }

    const tabela = document.getElementById("tabela");
    tabela.innerHTML = "";

    data.forEach(linha => {
        tabela.innerHTML += `
        <tr>
            <td>
                <input value="${linha.nome}"
                onchange="editar(${linha.id}, this.value, null)">
            </td>
            <td>
                <input type="number" value="${linha.pontuacao}"
                onchange="editar(${linha.id}, null, this.value)">
            </td>
            <td>
                <button onclick="excluir(${linha.id})">X</button>
            </td>
        </tr>`;
    });
}

/* ADICIONAR */
async function adicionar() {
    const nome = document.getElementById("nome").value;
    const pontuacao = document.getElementById("pontuacao").value;

    if (!nome || !pontuacao) return;

    await supabaseClient.from("ranking").insert({
        nome,
        pontuacao
    });

    document.getElementById("nome").value = "";
    document.getElementById("pontuacao").value = "";

    carregar();
}

/* EDITAR */
async function editar(id, nome, pontuacao) {
    const dados = {};
    if (nome !== null) dados.nome = nome;
    if (pontuacao !== null) dados.pontuacao = pontuacao;

    await supabaseClient
        .from("ranking")
        .update(dados)
        .eq("id", id);

    carregar();
}

/* EXCLUIR */
async function excluir(id) {
    await supabaseClient
        .from("ranking")
        .delete()
        .eq("id", id);

    carregar();
}

carregar();
</script>

</body>

</html>












